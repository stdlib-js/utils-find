{"version":3,"file":"index.mjs","sources":["../lib/find.js","../lib/index.js"],"sourcesContent":["/**\n* @license Apache-2.0\n*\n* Copyright (c) 2018 The Stdlib Authors.\n*\n* Licensed under the Apache License, Version 2.0 (the \"License\");\n* you may not use this file except in compliance with the License.\n* You may obtain a copy of the License at\n*\n*    http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing, software\n* distributed under the License is distributed on an \"AS IS\" BASIS,\n* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n* See the License for the specific language governing permissions and\n* limitations under the License.\n*/\n\n'use strict';\n\n// MODULES //\n\nvar isFunction = require( '@stdlib/assert-is-function' );\nvar isInteger = require( '@stdlib/assert-is-integer' ).isPrimitive;\nvar isObject = require( '@stdlib/assert-is-plain-object' );\nvar isString = require( '@stdlib/assert-is-string' ).isPrimitive;\nvar isCollection = require( '@stdlib/assert-is-collection' );\nvar hasOwnProp = require( '@stdlib/assert-has-own-property' );\nvar format = require( '@stdlib/string-format' );\n\n\n// MAIN //\n\n/**\n* Finds elements in an array-like object that satisfy a test condition.\n*\n* @param {(Collection|string)} arr - object from which elements will be tested\n* @param {Options} [options] - function options\n* @param {integer} [options.k=arr.length] - limits the number of returned elements\n* @param {string} [options.returns='indices'] - if `values`, values are returned; if `indices`, indices are returned; if `*`, both indices and values are returned\n* @param {Function} clbk - function invoked for each array element. If the return value is truthy, the value is considered to have satisfied the test condition.\n* @throws {TypeError} first argument must be an array-like object\n* @throws {TypeError} options argument must be an object\n* @throws {TypeError} last argument must be a function\n* @throws {TypeError} `options.k` must be an integer\n* @throws {TypeError} `options.returns` must be a string equal to `values`, `indices` or `*`\n* @returns {Array} array of indices, element values, or arrays of index-value pairs\n*\n* @example\n* var data = [ 30, 20, 50, 60, 10 ];\n* var vals = find( data, condition );\n* // returns [ 0, 2, 3 ]\n*\n* function condition( val ) {\n*     return val > 20;\n* }\n*\n* @example\n* var data = [ 30, 20, 50, 60, 10 ];\n* var opts = {\n*     'k': 2,\n*     'returns': 'values'\n* };\n* var vals = find( data, opts, condition );\n* // returns [ 30, 50 ]\n*\n* function condition( val ) {\n*     return val > 20;\n* }\n*\n* @example\n* var data = [ 30, 20, 50, 60, 10 ];\n* var vals = find( data, condition );\n* // returns []\n*\n* function condition( val ) {\n*     return val > 1000;\n* }\n*\n* @example\n* var data = [ 30, 20, 50, 60, 10 ];\n* var opts = {\n*     'k': -2,\n*     'returns': 'values'\n* };\n* var vals = find( data, opts, condition );\n* // returns [ 60, 50 ]\n*\n* function condition( val ) {\n*     return val > 20;\n* }\n*\n* @example\n* var data = [ 30, 20, 50, 60, 10 ];\n* var opts = {\n*     'k': -2,\n*     'returns': '*'\n* };\n* var vals = find( data, opts, condition );\n* // returns [ [3, 60], [2, 50] ]\n*\n* function condition( val ) {\n*     return val > 20;\n* }\n*/\nfunction find( arr, options, clbk ) { // eslint-disable-line stdlib/no-redeclare\n\tvar returns;\n\tvar count;\n\tvar mode;\n\tvar opts;\n\tvar len;\n\tvar out;\n\tvar ret;\n\tvar cb;\n\tvar i;\n\tvar k;\n\tvar v;\n\n\tmode = 0;\n\treturns = [ 'values', 'indices', '*' ];\n\n\tif ( !isCollection( arr ) && !isString( arr ) ) {\n\t\tthrow new TypeError( format( 'invalid argument. Must provide an array-like object. Value: `%s`.', arr ) );\n\t}\n\tlen = arr.length;\n\tif ( arguments.length < 3 ) {\n\t\topts = {};\n\t\tcb = options;\n\t} else {\n\t\topts = options;\n\t\tcb = clbk;\n\t}\n\tif ( !isFunction( cb ) ) {\n\t\tthrow new TypeError( format( 'invalid argument. Callback argument must be a function. Value: `%s`.', cb ) );\n\t}\n\tif ( !isObject( opts ) ) {\n\t\tthrow new TypeError( format( 'invalid argument. Options argument must be an object. Value: `%s`.', opts ) );\n\t}\n\tif ( hasOwnProp( opts, 'k' ) ) {\n\t\tk = opts.k;\n\t\tif ( !isInteger( k ) ) {\n\t\t\tthrow new TypeError( format( 'invalid argument. `k` must be an integer. Value: `%s`.', k ) );\n\t\t}\n\t} else {\n\t\tk = len;\n\t}\n\tif ( hasOwnProp( opts, 'returns' ) ) {\n\t\tret = opts.returns;\n\t\tif ( !isString( ret ) || returns.indexOf( ret ) === -1 ) {\n\t\t\tthrow new TypeError( format( 'invalid argument. `returns` option must be a string and have one of the following values: `values`, `indices`, `all`. Value: `%s`.', ret ) );\n\t\t}\n\t\tif ( ret === 'values' ) {\n\t\t\tmode = 1;\n\t\t} else if ( ret === '*' ) {\n\t\t\tmode = 2;\n\t\t}\n\t}\n\tout = [];\n\tcount = 0;\n\n\tif ( k === 0 ) {\n\t\treturn out;\n\t}\n\tif ( k > 0 ) {\n\t\t// Search moving from begin-to-end [0,1,...]:\n\t\tfor ( i = 0; i < len; i++ ) {\n\t\t\tv = arr[ i ];\n\t\t\tif ( cb( v, i, arr ) ) { // eslint-disable-line node/callback-return\n\t\t\t\tif ( mode === 2 ) {\n\t\t\t\t\tout.push( [ i, v ] );\n\t\t\t\t} else if ( mode === 1 ) {\n\t\t\t\t\tout.push( v );\n\t\t\t\t} else {\n\t\t\t\t\tout.push( i );\n\t\t\t\t}\n\t\t\t\tcount += 1;\n\t\t\t\tif ( count === k ) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn out;\n\t}\n\t// Search moving from end-to-begin [...,2,1,0]:\n\tk = -k;\n\tfor ( i = len-1; i >= 0; i-- ) {\n\t\tv = arr[ i ];\n\t\tif ( cb( v, i, arr ) ) { // eslint-disable-line node/callback-return\n\t\t\tif ( mode === 2 ) {\n\t\t\t\tout.push( [ i, v ] );\n\t\t\t} else if ( mode === 1 ) {\n\t\t\t\tout.push( v );\n\t\t\t} else {\n\t\t\t\tout.push( i );\n\t\t\t}\n\t\t\tcount += 1;\n\t\t\tif ( count === k ) {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\treturn out;\n}\n\n\n// EXPORTS //\n\nmodule.exports = find;\n","/**\n* @license Apache-2.0\n*\n* Copyright (c) 2018 The Stdlib Authors.\n*\n* Licensed under the Apache License, Version 2.0 (the \"License\");\n* you may not use this file except in compliance with the License.\n* You may obtain a copy of the License at\n*\n*    http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing, software\n* distributed under the License is distributed on an \"AS IS\" BASIS,\n* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n* See the License for the specific language governing permissions and\n* limitations under the License.\n*/\n\n'use strict';\n\n/**\n* Find elements in an array-like object that satisfy a test condition.\n*\n* @module @stdlib/utils-find\n*\n* @example\n* var find = require( '@stdlib/utils-find' );\n*\n* var data = [ 30, 20, 50, 60, 10 ];\n*\n* function condition( val ) {\n*     return val > 20;\n* }\n*\n* var vals = find( data, condition );\n* // returns [ 0, 2, 3 ]\n*\n* data = [ 30, 20, 50, 60, 10 ];\n* var opts = {\n*     'k': 2,\n*     'returns': 'values'\n* };\n* vals = find( data, opts, condition );\n* // returns [ 30, 50 ]\n*/\n\n// MODULES //\n\nvar find = require( './find.js' ); // eslint-disable-line stdlib/no-redeclare\n\n\n// EXPORTS //\n\nmodule.exports = find;\n"],"names":["isFunction","require$$0","isInteger","require$$1","isPrimitive","isObject","require$$2","isString","require$$3","isCollection","require$$4","hasOwnProp","require$$5","format","require$$6","lib","arr","options","clbk","returns","count","mode","opts","len","out","ret","cb","i","k","v","TypeError","length","arguments","indexOf","push"],"mappings":";;6lBAsBA,IAAIA,EAAaC,EACbC,EAAYC,EAAuCC,YACnDC,EAAWC,EACXC,EAAWC,EAAsCJ,YACjDK,EAAeC,EACfC,EAAaC,EACbC,EAASC,EAmLb,IC1JAC,EDoDA,SAAeC,EAAKC,EAASC,GAC5B,IAAIC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EAKJ,GAHAR,EAAO,EACPF,EAAU,CAAE,SAAU,UAAW,MAE3BV,EAAcO,KAAUT,EAAUS,GACvC,MAAM,IAAIc,UAAWjB,EAAQ,oEAAqEG,IAUnG,GARAO,EAAMP,EAAIe,OACLC,UAAUD,OAAS,GACvBT,EAAO,GACPI,EAAKT,IAELK,EAAOL,EACPS,EAAKR,IAEAlB,EAAY0B,GACjB,MAAM,IAAII,UAAWjB,EAAQ,uEAAwEa,IAEtG,IAAMrB,EAAUiB,GACf,MAAM,IAAIQ,UAAWjB,EAAQ,qEAAsES,IAEpG,GAAKX,EAAYW,EAAM,MAEtB,GADAM,EAAIN,EAAKM,GACH1B,EAAW0B,GAChB,MAAM,IAAIE,UAAWjB,EAAQ,yDAA0De,SAGxFA,EAAIL,EAEL,GAAKZ,EAAYW,EAAM,WAAc,CAEpC,GADAG,EAAMH,EAAKH,SACLZ,EAAUkB,KAAqC,IAA5BN,EAAQc,QAASR,GACzC,MAAM,IAAIK,UAAWjB,EAAQ,qIAAsIY,IAEvJ,WAARA,EACJJ,EAAO,EACY,MAARI,IACXJ,EAAO,GAMT,GAHAG,EAAM,GACNJ,EAAQ,EAEG,IAANQ,EACJ,OAAOJ,EAER,GAAKI,EAAI,EAAI,CAEZ,IAAMD,EAAI,EAAGA,EAAIJ,KAEXG,EADLG,EAAIb,EAAKW,GACGA,EAAGX,KACA,IAATK,EACJG,EAAIU,KAAM,CAAEP,EAAGE,IACK,IAATR,EACXG,EAAIU,KAAML,GAEVL,EAAIU,KAAMP,IAEXP,GAAS,KACMQ,IAXKD,KAgBtB,OAAOH,EAIR,IADAI,GAAKA,EACCD,EAAIJ,EAAI,EAAGI,GAAK,KAEhBD,EADLG,EAAIb,EAAKW,GACGA,EAAGX,KACA,IAATK,EACJG,EAAIU,KAAM,CAAEP,EAAGE,IACK,IAATR,EACXG,EAAIU,KAAML,GAEVL,EAAIU,KAAMP,IAEXP,GAAS,KACMQ,IAXQD,KAgBzB,OAAOH"}